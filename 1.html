<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Reactievergelijkingen - Makkelijk</title>

    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="css/index.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

    <script>
        var obj = {
            before: ["O2", "H"],
            after: ["H2O"],
            solution: [1, 4, 2]
        };
        var obj2 = {
            before: ["CO2", "H2O"],
            after: ["HCO3", "H3O"],
            solution: [1, 2, 1, 1]
        };
        var obj3 = {
            before: ["Na2HPO4"],
            after: ["Na4P2O7", "H2O"],
            solution: [2, 1, 1]
        };
        var vergelijkingen = [obj, obj2, obj3];
        var current = 1;
        $(document).ready(function() {
            $("#totaal_vragen").text(vergelijkingen.length);
            function setup(vergelijking, nummer) {
                var html = "";
                vergelijking.before.forEach(function (deel, index, array) {
                    console.log(index, length);
                    deel = deel.replace(/([0-9]+)/g, function (nummer) {
                        return "<sub>" + nummer + "</sub>";
                    });
                    console.log(deel);
                    var end = '+ </span>';
                    if (array.length - 1 === index) {
                        end = '</span> <i class="material-icons small">trending_flat</i> ';
                    }
                    html += '<input type="number" class="input center-align blue-text text-accent-2" id=""/><span> ' + deel + ' ' + end;
                });
                vergelijking.after.forEach(function (deel, index, array) {
                    console.log(index, length);
                    deel = deel.replace(/([0-9]+)/g, function (nummer) {
                        return "<sub>" + nummer + "</sub>";
                    });
                    console.log(deel);
                    var end = '+ </span>';
                    if (array.length - 1 === index) {
                        end = '';
                    }
                    html += '<input type="number" class="input center-align blue-text text-accent-2"/><span> ' + deel + ' ' + end;
                });

                var procent = Math.round(nummer / vergelijkingen.length * 100);
                $("#actieve_vraag").text(nummer);
                $("#progress_bar").css({width: procent + "%"});
                console.log(html);
                $("#vergelijking").html(html);
                $("input").on("input", function() {
                    if (colored === true) {
                        $("#vergelijking").removeClass("red-text");
                        colored = false;
                    }
                });
            }
            setup(vergelijkingen[0], current);

            $("#check").on("click", function() {
                console.log("Test!", current);
                $("#vergelijking").addClass("red-text");
                colored = true;
            });
        });
        var colored = false;
    </script>
</head>
<body>

<nav>
    <div class="nav-wrapper blue">
        <ul id="nav-mobile" class="left hide-on-med-and-down">
            <li><a href="1.html">Makkelijk</a></li>
            <li><a href="2.html">Middelmatig</a></li>
            <li><a href="3.html">Moeilijk</a></li>
        </ul>
    </div>
</nav>

<div class="row">
    <div class="col m8 l8 s8 offset-l2 offset-m2 offset-s2">
        <div class="card-panel green accent-2 white-text">
            <div class="row">
                <p class="center-align">Vraag <span id="actieve_vraag"></span> / <span id="totaal_vragen"></span></p>
                <div class="progress col m8 l8 s8 offset-l2 offset-m2 offset-l2">
                    <div class="determinate" id="progress_bar" style="width: 50%"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col m8 l8 s8 offset-l2 offset-m2 offset-s2">
        <div class="card-panel green accent-2 white-text">
            <h4 id="vergelijking" class="center"></h4>
            <div class="row">
                <button id="check" class="col m8 l8 s8 offset-l2 offset-m2 offset-l2 btn btn-block yellow darken-4 waves-effect waves-light">
                    Controleer
                </button>
            </div>
        </div>
    </div>
</div>

<!--Import jQuery before materialize.js-->
<script type="text/javascript" src="js/materialize.min.js"></script>
</body>
</html>